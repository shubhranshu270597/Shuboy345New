<!--
  @File Name          : TripPandaForDwarkaDarshan.page
  @Description        : 
  @Author             : shubhranshu
  @Group              : 
  @Last Modified By   : shubhranshu
  @Last Modified On   : 07-04-2020
  @Modification Log   : 
  Ver       Date            Author      		    Modification
  1.0    14/12/2019   shubhranshu     Initial Version
-->
<apex:page lightningStylesheets="true" standardStylesheets="false" showHeader="false" sidebar="false" applyBodyTag="false"
    applyHtmlTag="false">
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" lang="en">
    <apex:includeLightning />

    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Trip Panda</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>

    <body style="background-image: url(https://i.pinimg.com/564x/4f/7d/66/4f7d667258c8f9a69b3c51f7e8fb2875.jpg); background-position: center;background-repeat: no-repeat;background-size: cover;height: 100%">
        <div id="lightning" />
        <script>
            function getQueryParameters() {
                let params = {};
                let search = location.search.substring(1);
                if (search) {
                    params = JSON.parse('{"' + search.replace(/&/g, '","').replace(/=/g, '":"') + '"}', (key, value) => {
                        return key === "" ? value : decodeURIComponent(value)
                    });
                }
                return params;
            }

            var params = getQueryParameters();
            console.log('params '+JSON.stringify(params));
            
            $Lightning.use("c:tripPandaApp", function () {
                $Lightning.createComponent("c:tripPandaComp", { "parameters": params },
                    "lightning",
                    function (cmp) {
                        console.log('component created successfully ...');
                    });
            });

            // To render the Page Url
            history.pushState(null, null, 'DwarkaDarshan');
            window.addEventListener('popstate', function () {
                history.pushState(null, null, 'DwarkaDarshan');
            });
        </script>
    </body>

    </html>
</apex:page>